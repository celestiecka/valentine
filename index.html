<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Ayannn ‚ù§Ô∏è</title>
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; height: 100vh; display: flex; justify-content: center; align-items: center; background: #fff0f5; overflow: hidden; font-family: sans-serif; touch-action: manipulation; }
        
        #container { z-index: 10; text-align: center; background: white; padding: 20px; border-radius: 20px; border: 3px solid #ff69b4; width: 85%; max-width: 350px; position: relative; box-shadow: 0 10px 20px rgba(0,0,0,0.1); transition: transform 0.5s ease-in, opacity 0.3s; }
        
        .img-wrap { width: 100%; height: 180px; margin-bottom: 10px; display: flex; justify-content: center; align-items: center; border-radius: 12px; background: #fdfdfd; overflow: hidden; }
        #meme-img { width: 100%; height: 100%; object-fit: contain; }
        #msg { font-weight: bold; font-size: 0.9rem; min-height: 3em; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; color: #555; line-height: 1.3; }
        
        button { padding: 12px; font-weight: bold; border-radius: 12px; border: none; cursor: pointer; -webkit-tap-highlight-color: transparent; }
        .quiz-btn { background: #ff69b4; color: white; width: 100%; margin-bottom: 10px; display: block; }
        
        #yes { background: #ff69b4; color: white; position: fixed; bottom: 20px; right: 20px; width: 85px; height: 50px; z-index: 999; border: 2px solid white; }
        #fake-no { background: #dddddd; color: #888888; width: 100%; }
        
        /* GRID CHALLENGE UI WITH LABEL */
        #grid-wrapper {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 95vw; max-width: 400px; z-index: 9999; text-align: center;
        }
        #clue-label { 
            background: #1e7a1e; color: white; padding: 10px; border-radius: 10px; 
            font-size: 0.8rem; font-weight: bold; margin-bottom: 10px; border: 2px solid white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        #grid-container { 
            display: grid; grid-template-columns: repeat(10, 1fr); 
            gap: 2px; padding: 8px; background: white; 
            border: 3px solid #ff69b4; border-radius: 15px; 
        }

        .grid-yes { aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; font-size: 8px; font-weight: bold; color: rgba(255,255,255,0.7); border-radius: 2px; }
        .f { background: #1e7a1e; } 
        .r { background: #248524; } 
        
        #love-form { 
            position: fixed; background: white; padding: 25px; border-radius: 20px; 
            border: 4px solid #ff69b4; z-index: 10001; display: none; width: 90%; max-width: 300px; 
            text-align: center; box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            transition: all 0.15s ease-out;
        }
        #love-input { width: 100%; padding: 12px; border: 2px solid #ff69b4; border-radius: 8px; text-transform: uppercase; text-align: center; margin-bottom: 15px; font-size: 16px; outline: none; }
        
        .heart { position: fixed; top: -10%; font-size: 24px; animation: fall 3s linear forwards; pointer-events: none; z-index: 1; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body onclick="reviveFrame()">

<div id="container">
    <h1 style="color: #d02090; font-size: 1.2rem;">Hey Ayang! ‚ú®</h1>
    <div class="img-wrap"><img id="meme-img" src="https://raw.githubusercontent.com/celestiecka/valentine/main/1.gif" alt="Loading..."></div>
    <p id="msg">Will you be my forever valentine?</p>
    <div id="btn-group"><button id="fake-no" onclick="sinkFrame(event)">YES, BUT IN GREY</button></div>
</div>

<div id="grid-wrapper">
    <div id="clue-label">FIND THE RIGHT GREEN CUZ I'M THE GREENEST GREEN FLAG üçÄ</div>
    <div id="grid-container"></div>
</div>

<div id="love-form" onmouseover="teleportForm()" ontouchstart="teleportForm()">
    <p id="challenge-msg" style="font-size: 0.9rem; font-weight: bold; color: #d02090; margin-bottom: 15px;">FINAL STEP: TYPE "I LOVE YOU" IN CAPS:</p>
    <input type="text" id="love-input" placeholder="TYPE HERE..." autocomplete="off">
    <button id="submit-love" class="quiz-btn" onclick="checkLove()">SUBMIT</button>
</div>

<button id="yes" onclick="triggerMove()">YES! ‚ù§Ô∏è</button>

<script>
    let count = 0, jumpCount = 0, isSunk = false, quizStarted = false;
    let data = { food: "", act: "", want: "", likeMost: "", sure: "" };

    const username = "celestiecka"; 
    const repo = "valentine";
    const memes = Array.from({length: 15}, (_, i) => `https://raw.githubusercontent.com/${username}/${repo}/main/${i+1}.gif`);

    const messages = {
        0: "Will you be my forever valentine?", 1: "too slow, Ayang!", 2: "Keep trying if you love me", 3: "admit you are musyop",
        4: "i think you're not very good at this", 5: "almost there...i guess. Try the grey button.",
        6: "Just kidding haha YOUR musyop", 7: "I know I spelled that last one wrongly",
        8: "Are you pissed off now ayann?", 9: "Bet that grey button works",
        10: "Okay, I promise this is the last one", 11: "NOPE, TRY AGAIN",
        12: "X sygggg iiiii...Tayamm I takk??", 13: "Ready to admit you are musyop now?",
        14: "YES YOU ARE", 15: "Okay you win musyop, catch it now!"
    };

    function sinkFrame(e) {
        e.stopPropagation();
        if (quizStarted || count >= 15) return; 
        const frame = document.getElementById('container');
        const yesBtn = document.getElementById('yes');
        frame.style.transform = "translateY(110vh)"; 
        frame.style.opacity = "0";
        yesBtn.style.opacity = "0"; 
        isSunk = true;
    }

    function reviveFrame() {
        if (!isSunk) return;
        const frame = document.getElementById('container');
        const yesBtn = document.getElementById('yes');
        frame.style.transform = "translateY(0)";
        frame.style.opacity = "1";
        yesBtn.style.opacity = "1";
        isSunk = false;
    }

    function triggerMove() {
        if (!isSunk) {
            count++;
            updateUI();
        }
    }

    function updateUI() {
        const container = document.getElementById('container');
        const msg = document.getElementById('msg'), img = document.getElementById('meme-img'), yesBtn = document.getElementById('yes');
        
        if (count <= 15) {
            img.src = memes[Math.max(0, count - 1)]; 
            if(messages[count]) msg.innerHTML = messages[count];
            
            if (count === 9) { 
                container.style.display = 'none'; 
                document.getElementById('grid-wrapper').style.display = 'block';
                spawnGrid(); 
                return; 
            }

            if (count === 15) {
                yesBtn.style.position = "static"; yesBtn.style.width = "100%";
                document.getElementById('btn-group').appendChild(yesBtn);
                document.getElementById('fake-no').style.display = "none";
            } else {
                yesBtn.style.left = Math.random() * (window.innerWidth - 100) + "px";
                yesBtn.style.top = Math.random() * (window.innerHeight - 100) + "px";
            }
        } else { startQuiz(); }
    }

    function spawnGrid() {
        const grid = document.getElementById('grid-container');
        grid.innerHTML = "";
        let realIndex = Math.floor(Math.random() * 100); 
        for (let i = 0; i < 100; i++) {
            const b = document.createElement('div');
            b.innerHTML = "YES";
            if (i === realIndex) {
                b.className = "grid-yes r";
                b.onclick = (e) => { 
                    e.stopPropagation(); 
                    document.getElementById('grid-wrapper').style.display = 'none'; 
                    document.getElementById('container').style.display = 'block'; 
                    triggerMove(); 
                };
            } else {
                b.className = "grid-yes f";
                b.onclick = (e) => { e.stopPropagation(); alert("Wrong one, musyop!"); };
            }
            grid.appendChild(b);
        }
    }

    function startQuiz() { 
        quizStarted = true;
        renderQuiz("Food? üçú", ["Sushi üç£", "Pasta üçù", "Steak ü•©"], 'food', nextAct); 
    }
    function nextAct() { renderQuiz("Activity? üé°", ["Movie üçø", "Arcade üëæ"], 'act', nextWant); }
    function nextWant() { renderQuiz("What would u like? üòà", ["A kiss", "A hug", "A bite", "All"], 'want', nextLike); }
    function nextLike() { renderQuiz("What do you like most? üòè", ["My voice", "My eyes", "My ass"], 'likeMost', nextSure); }
    function nextSure() { renderQuiz("Are you sure? ü§®", ["Yes", "Not really"], 'sure', startTypingChallenge); }

    function startTypingChallenge() {
        document.getElementById('container').style.display = 'none';
        document.getElementById('love-form').style.display = 'block';
    }

    function teleportForm() {
        if (jumpCount >= 100) return; 
        jumpCount++;
        const form = document.getElementById('love-form');
        const challengeMsg = document.getElementById('challenge-msg');
        challengeMsg.innerHTML = `CATCH THIS BOX!`;
        let x = Math.random() * (window.innerWidth - form.offsetWidth);
        let y = Math.random() * (window.innerHeight - form.offsetHeight);
        form.style.left = Math.max(form.offsetWidth / 2, x + (form.offsetWidth / 2)) + "px";
        form.style.top = Math.max(form.offsetHeight / 2, y + (form.offsetHeight / 2)) + "px";

        if (jumpCount === 100) {
            challengeMsg.innerHTML = "YOU FINALLY DID IT! TYPE IT NOW:";
            form.style.left = "50%"; form.style.top = "50%";
            form.onmouseover = null; form.ontouchstart = null;
        }
    }

    function checkLove() {
        const val = document.getElementById('love-input').value.trim().toUpperCase();
        if (val === "I LOVE YOU") {
            document.getElementById('love-form').style.display = 'none';
            finalPage();
        } else { alert("WRONG! Type exactly: I LOVE YOU"); }
    }

    function renderQuiz(title, options, key, nextFunc) {
        let html = `<h1 style="font-size: 1.2rem; color: #d02090;">${title}</h1>`;
        options.forEach(opt => { html += `<button class='quiz-btn' onclick="saveData('${key}', '${opt}');">${opt}</button>`; });
        document.getElementById('container').innerHTML = html; window.nextStep = nextFunc;
    }

    function saveData(key, val) { data[key] = val; window.nextStep(); }

    function finalPage() {
        const c = document.getElementById('container');
        c.style.display = 'block';
        c.innerHTML = `<h1>Confirmed! ‚ù§Ô∏è</h1>
        <p style="font-size:1rem; color:#d02090; font-weight:bold;">Oloorr tiannnn ayann I ‚ù§Ô∏è Tayamm uuu. SEE YOU SOON! ü•π</p>
        <p><b>Feb 17th!</b></p>
        <div style="text-align:left; font-size:0.8rem; padding: 10px; background: #fff0f5; border-radius:10px;">
            üç¥ ${data.food} | üé° ${data.act}<br>
            üéÅ ${data.want} | ‚ú® ${data.likeMost}
        </div><br><b>Screenshot this! ‚ú®</b>`;
    }

    setInterval(() => {
        const h = document.createElement('div'); h.innerHTML = '‚ù§Ô∏è'; h.className = 'heart';
        h.style.left = Math.random() * 100 + 'vw'; document.body.appendChild(h);
        setTimeout(() => h.remove(), 3000);
    }, 300);
</script>
</body>
</html>
